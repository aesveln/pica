<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:camel="http://camel.apache.org/schema/spring"
	   xmlns:il="http://aesveln.com.co/transfor/il/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="

	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        
	http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">


	<!-- ================================================================= -->
	<!-- CANONICAL ADAPTER -->
	<!-- ================================================================= -->

	<camel:routeContext id="adaptadores-customer-info-context"
						>

		<camel:route id="adaptador-customer-info-route-add">

			<camel:from uri="direct:adaptador-customer-info-add" />
			<camel:log message="Info customer: ${exchangeProperty[infoCustomer]}" />
			<camel:log message="Llamado a customer-info add." />
			<camel:setBody>
				<camel:simple>${exchangeProperty[infoCustomer]}</camel:simple>
			</camel:setBody>

			<camel:setProperty propertyName="fileNameUser">
				<camel:xpath>/il:informacionUsuario/il:id/text()
				</camel:xpath>
			</camel:setProperty>

			<camel:to uri="file:/home/narfco/customer-info/?fileName=${exchangeProperty[fileNameUser]}.xml"/>
			<camel:log message="Archivo escrito en customer-info: ${body}" />
		</camel:route>



	</camel:routeContext>

</beans>